extends index

append header
  - siteTitle = req.app.get('site_title');
  if item.short_title
    title= item.short_title + ' - ' + siteTitle
  else
    title= 'Ingen titel - ' + siteTitle

  +assetMeta(item, image_src_set)
  +shareThisJS()

block content
  div(itemscope, itemtype='http://schema.org/CreativeWork', class='asset')
    - var title = item.short_title || 'Ingen titel'
    .row
      .col-md-6
        .bleed.asset-image
          +responsiveImage(title)
        .row
          .asset-tools
            .btn-group.dropup
              a.btn.btn-default.dropdown-toggle(data-toggle='dropdown', role='button') Download
                +icon('download-icon')
              ul.dropdown-menu(role='menu')
                li
                  a(href='#{image_src_set[800]}') Lille
                li.divider
                li
                  a(href='#{image_src_set[1200]}') Mellem
                li.divider
                li
                  a(href='http://samlinger.natmus.dk/CIP/asset/download/#{catalog.alias}/#{item.id}') Original
            +shareThisHTML()
            span.licens
              span.title Licens:
              - if(item.license)
                  - var license = helpers.license_tag(item.license.id);
                  - if(license)
                    a(href=license.url, rel='license', target='_blank')
                      img(src=license.img, alt='Creative Commons licens')
                  - else
                    | #{item.license.displaystring}
                - else
                  | -

      .col-md-6
        p.catalog
          a(href='/#{catalog.alias}')= catalog.name

        // Title
        h1(itemprop='name')= title

        // Description
        - if(item.description)
          h2.sr-only Beskrivelse
          p(itemprop='description',
            class='lead')= item.description

        // Time and period
        h2 Tidsperiode og årstal
        table
          tbody
            tr
              th Datering:
              td
                +addDating(item, catalog.alias)
            tr
              th Optagelsestid:
              td(itemprop='dateCreated', class='date')
                +formatDate(item.acceptance_time_from, item.acceptance_time_to)
            tr
              th Fremstillingstid:
              td
                +formatDate(item.creation_time_from, item.creation_time_to)

        // Place
        h2 Sted
        - var has_coordinates = item.longitude && item.latitude;
        table
          tbody
            tr
              th Område:
              td
                +addPlace(item, catalog.alias)
            tr
              th Adresse:
              td
                - var address = item.address || item.street;
                - var zipcode = item.zipcode;
                - var city = item.city;

                - if(address || zipcode || city)
                  - if(address)
                    | #{address}

                  - if(zipcode)
                    - if(address)
                      | ,
                    | #{zipcode}
                  - if(city)
                    - if(address || zipcode)
                      | ,
                    | #{city}
                - else
                  | -
            tr
              th Koordinater:
              td= has_coordinates ? item.longitude.toFixed(5) + ',' + item.latitude.toFixed(5) : '-'

            - if(has_coordinates)
              tr
                td(colspan='2')
                  a(href='http://maps.google.dk/maps?ll=' + item.longitude + ',' + item.latitude + '&spn=0.008039,0.015857&t=h&z=16', target='blank')
                    img.map(alt='Google Map', src='http://maps.google.dk/maps/api/staticmap?size=800x600&markers=' + item.longitude + ',' + item.latitude + '&sensor=false&scale=2&zoom=14&maptype=terrain')
            tr
              th Noter:
              td= item.locationnote || '-'


        // Technical info
        h2 Tekniske oplysninger
        table
          tbody
            tr
              th Fil-ID:
              td= id || '-'
            tr
              th Størrelse (pixel):
              td
                if item.img_width && item.img_height
                  | (b) #{item.img_width.toFixed(3) || '-'}, (h) #{item.img_height.toFixed(3) || '-'}
            tr
              th Opløsning (DPI):
              td= item.dpi || '-'
            //- tr
            //-   th Licens:
            //-   td
                //- - if(item.license)
                //-   - var license = helpers.license_tag(item.license.id);
                //-   - if(license)
                //-     a(href=license.url, rel='license', target='_blank')
                //-       img(src=license.img, alt='Creative Commons licens')
                //-   - else
                //-     | #{item.license.displaystring}
                //- - else
                //-   | -
            tr
              th Rettighedshaver og fotograf:
              td
                span(itemprop='copyrightHolder')= item.copyright || '-'
                | ,
                span(itemprop='creator')= item.creator || '-'


        // Additional info
        .asset-block
          h2.additional-info-header
            - var path = req.path
            a(href='#{path}#additional-info', data-toggle='collapse', data-target='#additional-info').collapsed
              +icon('minus-2-icon')
              +icon('plus-2-icon')
              | Yderligere information

          div#additional-info.collapse
            table
              tbody
                tr
                  th Filnavn:
                  td= item.filename || '-'
                tr
                  th Arkivalienr.:
                  td= item.archiveno || '-'
                tr
                  th Genstandsnr.:
                  td= item.unitno || '-'
                tr
                  th Arkivnavn:
                  td= item.archivename ? item.archivename.displaystring : '-'
                tr
                  th Tidsnote:
                  td= item.timenote || '-'

                tr
                  th Topnr.:
                  td= item.topno || '-'

